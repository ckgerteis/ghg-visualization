import{j as e,R as ee,r as u,a as oe}from"./index-COKYWghS.js";const P=(s,n,t)=>Math.max(n,Math.min(t,s)),j=(s,n=0)=>{const t=Number(s);return Number.isFinite(t)?t.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n}):"—"},F={20:{ch4:80,label:"GWP20"},100:{ch4:28,label:"GWP100"}},E=[{id:"gulf_japan_panama",label:"U.S. Gulf → Japan (via Panama)",distanceNm:9e3},{id:"qatar_japan_malacca",label:"Qatar → Japan (via Malacca)",distanceNm:6700},{id:"aus_japan",label:"NW Australia → Japan",distanceNm:3900},{id:"custom_5000",label:"Generic corridor",distanceNm:5e3}],W=[{id:"me_gi",label:"ME-GI / high-pressure dual-fuel (lower slip)",defaultSlipPct:.2,shippingEnergyPctPer1000nm:.8},{id:"x_df",label:"X-DF / low-pressure dual-fuel (higher slip)",defaultSlipPct:1.6,shippingEnergyPctPer1000nm:.9},{id:"steam_turbine",label:"Steam turbine (legacy)",defaultSlipPct:.1,shippingEnergyPctPer1000nm:1.4}],f={upstreamLeakPct:1.5,processingEnergyPct:2,liquefactionEnergyPct:8,regasEnergyPct:1,plantEfficiencyPct:55,coalBaseline_gPerKWh:900,fuelLHV_MJ_per_kg_CH4:50,combustionCO2_g_per_MJ:56,processCO2_g_per_MJ_fuelUsed:56,heatmapRanges:{leakagePct:{min:0,max:3,steps:61},slipPct:{min:0,max:2,steps:61}}};function te({boundary:s,gwp:n,corridor:t,engine:c,upstreamLeakPct:r,processEnergy:a,plantEfficiencyPct:l,coalBaseline_gPerKWh:m}){const o=t.distanceNm/1e3*P(c.shippingRatePer1000nm,0,10),h=1e3/(1-(P(a.processingPct,0,30)+P(a.liquefactionPct,0,40)+P(a.regasPct,0,15)+P(o,0,60))/100),v=P(a.processingPct,0,30)/100*1e3,i=P(a.liquefactionPct,0,40)/100*1e3,x=P(a.regasPct,0,15)/100*1e3,p=P(o,0,60)/100*1e3,R=h/f.fuelLHV_MJ_per_kg_CH4*P(r,0,20)/100,$=p/f.fuelLHV_MJ_per_kg_CH4*P(c.methaneSlipPct,0,10)/100,S=v*f.processCO2_g_per_MJ_fuelUsed,ne=i*f.processCO2_g_per_MJ_fuelUsed,ae=x*f.processCO2_g_per_MJ_fuelUsed,H=p*f.combustionCO2_g_per_MJ,ce=1e3*f.combustionCO2_g_per_MJ,ie=R*1e3*n.ch4,T=$*1e3*n.ch4,C=s==="WTW"||s==="WTWIRE",J=[{stage:"Upstream leakage (CH₄)",co2_g:0,ch4_co2e_g:C?ie:0},{stage:"Processing",co2_g:C?S:0,ch4_co2e_g:0},{stage:"Liquefaction",co2_g:C?ne:0,ch4_co2e_g:0},{stage:"Shipping (CO₂)",co2_g:C?H:0,ch4_co2e_g:0},{stage:"Shipping slip (CH₄)",co2_g:0,ch4_co2e_g:C?T:0},{stage:"Regasification",co2_g:C?ae:0,ch4_co2e_g:0},{stage:"Combustion (CO₂)",co2_g:s==="TTW"||s==="WTW"||s==="WTWIRE"?ce:0,ch4_co2e_g:0}],B=J.reduce((q,O)=>q+O.co2_g+O.ch4_co2e_g,0),le=C?H+T:0,re=B>0?le/B*100:0;let I=null,K="Scenario unit = 1,000 MJ delivered fuel energy";if(s==="WTWIRE"){const O=1e3*(P(l,10,75)/100)/3.6;I=B/O-m,K=`Converted using plant efficiency (${l}%) → gCO₂e/kWh`}return{total_gCO2e:B,breakdown:J,shippingSharePct:re,deltaVsCoal_gPerKWh:I,unitHint:K}}function de({gwp:s,corridorNm:n,engineDefaults:t,processEnergy:c,plantEfficiencyPct:r,coalBaseline_gPerKWh:a,ranges:l}){const m=l.leakagePct,d=l.slipPct,o=[];for(let g=0;g<d.steps;g++){const h=d.min+g*(d.max-d.min)/(d.steps-1),v=[];for(let i=0;i<m.steps;i++){const x=m.min+i*(m.max-m.min)/(m.steps-1),p=te({boundary:"WTWIRE",gwp:s,corridor:{distanceNm:n},engine:{methaneSlipPct:h,shippingRatePer1000nm:t.shippingRatePer1000nm},upstreamLeakPct:x,processEnergy:c,plantEfficiencyPct:r,coalBaseline_gPerKWh:a});v.push(p.deltaVsCoal_gPerKWh??0)}o.push(v)}return{leakage:m,slip:d,values:o,coalBaseline_gPerKWh:a,gwpLabel:s.label}}function me(s){return"Δ vs coal baseline"}const w={co2:"#0f172a",ch4:"#b91c1c",bg:"#f8fafc",border:"#e2e8f0"};function D({breakdown:s}){const n=s.reduce((t,c)=>t+c.co2_g+c.ch4_co2e_g,0);return!Number.isFinite(n)||n<=0?e.jsx("div",{className:"rounded-md border p-4 text-sm text-slate-600",children:"No emissions in current boundary selection."}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full rounded-md border overflow-hidden",style:{background:w.bg,borderColor:w.border},children:e.jsx("div",{className:"flex w-full h-10",children:s.map((t,c)=>{const r=(t.co2_g||0)/n*100,a=(t.ch4_co2e_g||0)/n*100;return e.jsxs(ee.Fragment,{children:[r>.2?e.jsx("div",{title:`${t.stage}: CO₂ ${(t.co2_g||0).toFixed(0)} g`,style:{width:`${r}%`,background:w.co2}}):null,a>.2?e.jsx("div",{title:`${t.stage}: CH₄ (CO₂e) ${(t.ch4_co2e_g||0).toFixed(0)} g`,style:{width:`${a}%`,background:w.ch4}}):null]},c)})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map((t,c)=>{const r=t.co2_g||0,a=t.ch4_co2e_g||0,l=(r+a)/n*100;return e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-sm font-medium",children:t.stage}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Share: ",l.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-slate-700 mt-2 flex gap-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:w.co2}}),"CO₂: ",r.toFixed(0)," g"]}),e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:w.ch4}}),"CH₄ (CO₂e): ",a.toFixed(0)," g"]})]})]},c)})}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Color key: ",e.jsx("span",{className:"font-medium",children:"CO₂"})," (dark) and"," ",e.jsx("span",{className:"font-medium",children:"CH₄ as CO₂e"})," (red)."]})]})}function k(s,n,t){return s+(n-s)*t}function U(s,n,t){const c=(s-n)/(t-n||1),r=Math.max(0,Math.min(1,c)),a=(0-n)/(t-n||1);if(r<a){const l=r/(a||1),m=k(16,255,l),d=k(185,255,l),o=k(129,255,l);return`rgb(${m|0},${d|0},${o|0})`}else{const l=(r-a)/(1-a||1),m=k(255,185,l),d=k(255,28,l),o=k(255,28,l);return`rgb(${m|0},${d|0},${o|0})`}}function G(s){return Math.max(0,Math.min(1,s))}function pe(s,n){const t=s.leakage,c=s.slip,r=(n.leakagePct-t.min)/(t.max-t.min||1),a=(n.slipPct-c.min)/(c.max-c.min||1);return{x:G(r),y:G(a)}}function ge({grid:s,markers:n=[]}){const t=u.useRef(null),c=u.useMemo(()=>{let a=1/0,l=-1/0;for(const o of s.values)for(const g of o)g<a&&(a=g),g>l&&(l=g);const m=Math.max(Math.abs(a),Math.abs(l)),d=Math.min(m,m*.9);return{min:-d,max:d}},[s]);u.useEffect(()=>{var v;const a=t.current;if(!a)return;const l=a.width,m=a.height,d=a.getContext("2d");if(!d)return;const o=s.values.length,g=((v=s.values[0])==null?void 0:v.length)??0,h=d.createImageData(l,m);for(let i=0;i<m;i++){const x=Math.floor(i/m*o);for(let p=0;p<l;p++){const y=Math.floor(p/l*g),R=s.values[x][y],$=U(R,c.min,c.max).match(/\d+/g).map(Number),S=(i*l+p)*4;h.data[S]=$[0],h.data[S+1]=$[1],h.data[S+2]=$[2],h.data[S+3]=255}}d.putImageData(h,0,0)},[s,c]);const r=u.useMemo(()=>n.map(a=>({...a,pos:pe(s,a)})),[s,n]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative rounded-md border overflow-hidden bg-white",children:[e.jsx("canvas",{ref:t,width:720,height:420,className:"block w-full h-auto"}),r.map(a=>e.jsx("div",{className:"absolute",style:{left:`${a.pos.x*100}%`,top:`${a.pos.y*100}%`,transform:"translate(-50%, -50%)"},title:`${a.label}: leakage ${a.leakagePct}%, slip ${a.slipPct}%`,children:e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${a.ringClass} ${a.fillClass}`})},a.id))]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx("span",{className:"text-slate-600",children:"Better than coal"}),e.jsx("div",{className:"flex h-6 rounded overflow-hidden border",style:{width:"200px"},children:[...Array(50)].map((a,l)=>{const m=l/49,d=c.min+m*(c.max-c.min),o=U(d,c.min,c.max);return e.jsx("div",{style:{flex:1,backgroundColor:o}},l)})}),e.jsx("span",{className:"text-slate-600",children:"Worse than coal"}),e.jsxs("span",{className:"text-slate-500 ml-2",children:["(",Math.round(c.min)," to +",Math.round(c.max)," gCO₂e/kWh)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-slate-700",children:[e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"X-axis"}),e.jsx("div",{children:"Upstream leakage (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.leakage.min,"–",s.leakage.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Y-axis"}),e.jsx("div",{children:"Methane slip (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.slip.min,"–",s.slip.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Color"}),e.jsx("div",{children:"Δ vs coal (gCO₂e/kWh)"}),e.jsx("div",{className:"text-slate-600",children:"Green = better than coal; red = worse than coal"})]})]})]})}function N(s,n){const t=Number(s);return Number.isFinite(t)?t:n}function M(s,n){return typeof s=="string"&&s.length?s:n}function b(s,n,t){t!=null&&s.set(n,String(t))}function V(s,n){const t=new URLSearchParams;return b(t,`${s}b`,n.boundary),b(t,`${s}g`,n.gwpHorizon),b(t,`${s}c`,n.corridorId),b(t,`${s}e`,n.engineId),b(t,`${s}ul`,n.upstreamLeakPct),b(t,`${s}ms`,n.methaneSlipPct),b(t,`${s}pe`,n.plantEffPct),b(t,`${s}cb`,n.coalBaseline_gPerKWh),b(t,`${s}dt`,n.detourPct),b(t,`${s}sr`,n.shippingRatePer1000nm),b(t,`${s}liq`,n.liquefactionPct),b(t,`${s}pro`,n.processingPct),b(t,`${s}reg`,n.regasPct),t}function z(s,n,t){return{...t,boundary:M(n.get(`${s}b`),t.boundary),gwpHorizon:M(n.get(`${s}g`),t.gwpHorizon),corridorId:M(n.get(`${s}c`),t.corridorId),engineId:M(n.get(`${s}e`),t.engineId),upstreamLeakPct:N(n.get(`${s}ul`),t.upstreamLeakPct),methaneSlipPct:N(n.get(`${s}ms`),t.methaneSlipPct),plantEffPct:N(n.get(`${s}pe`),t.plantEffPct),coalBaseline_gPerKWh:N(n.get(`${s}cb`),t.coalBaseline_gPerKWh),detourPct:N(n.get(`${s}dt`),t.detourPct),shippingRatePer1000nm:N(n.get(`${s}sr`),t.shippingRatePer1000nm),liquefactionPct:N(n.get(`${s}liq`),t.liquefactionPct),processingPct:N(n.get(`${s}pro`),t.processingPct),regasPct:N(n.get(`${s}reg`),t.regasPct)}}function ue({scenarioA:s,scenarioB:n,surfaceFrom:t}){const c=V("a",s),r=V("b",n),a=new URLSearchParams;for(const[m,d]of c.entries())a.set(m,d);for(const[m,d]of r.entries())a.set(m,d);a.set("surf",t);const l=`${window.location.pathname}?${a.toString()}`;window.history.replaceState(null,"",l)}function he(s,n,t="A"){const c=new URLSearchParams(window.location.search),r=M(c.get("surf"),t);return{scenarioA:z("a",c,s),scenarioB:z("b",c,n),surfaceFrom:r==="B"?"B":"A"}}function A(s,n){const t=URL.createObjectURL(n),c=document.createElement("a");c.href=t,c.download=s,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(t)}function xe(s,n){const t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});A(s,t)}function fe(s,n){if(!n||!n.length){A(s,new Blob([""],{type:"text/csv"}));return}const t=Object.keys(n[0]),c=a=>{const l=String(a??"");return/[",\n]/.test(l)?`"${l.replaceAll('"','""')}"`:l},r=[t.join(","),...n.map(a=>t.map(l=>c(a[l])).join(","))];A(s,new Blob([r.join(`
`)],{type:"text/csv"}))}function X(){const s=W[0];return{boundary:"WTW",gwpHorizon:"100",corridorId:E[0].id,engineId:s.id,upstreamLeakPct:f.upstreamLeakPct,methaneSlipPct:s.defaultSlipPct,plantEffPct:f.plantEfficiencyPct,coalBaseline_gPerKWh:f.coalBaseline_gPerKWh,detourPct:0,shippingRatePer1000nm:s.shippingEnergyPctPer1000nm,liquefactionPct:f.liquefactionEnergyPct,processingPct:f.processingEnergyPct,regasPct:f.regasEnergyPct}}function be(s,n){return s.distanceNm*(1+P(n,0,200)/100)}function Q(s){const n=E.find(l=>l.id===s.corridorId)??E[0],t=W.find(l=>l.id===s.engineId)??W[0],c=F[s.gwpHorizon]??F[100],r=be(n,s.detourPct),a=te({boundary:s.boundary,gwp:c,corridor:{...n,distanceNm:r},engine:{...t,methaneSlipPct:s.methaneSlipPct,shippingRatePer1000nm:s.shippingRatePer1000nm},upstreamLeakPct:s.upstreamLeakPct,processEnergy:{liquefactionPct:s.liquefactionPct,processingPct:s.processingPct,regasPct:s.regasPct},plantEfficiencyPct:s.plantEffPct,coalBaseline_gPerKWh:s.coalBaseline_gPerKWh});return{corridor:n,engine:t,gwp:c,effDistanceNm:r,outputs:a}}function Pe(s,n,t){return{label:s,parameters:n,derived:{corridor:t.corridor,engine:t.engine,gwp:t.gwp,effectiveDistanceNm:t.effDistanceNm},outputs:t.outputs,exportedAt:new Date().toISOString()}}function je(s,n){return n.outputs.breakdown.map(t=>({scenario:s,stage:t.stage,co2_g:t.co2_g,ch4_co2e_g:t.ch4_co2e_g,total_stage_gco2e:(t.co2_g||0)+(t.ch4_co2e_g||0)}))}function ve(){const s=u.useMemo(()=>X(),[]),n=u.useMemo(()=>({...X(),gwpHorizon:"20"}),[]),[t,c]=u.useState(s),[r,a]=u.useState(n),[l,m]=u.useState("A");u.useEffect(()=>{const p=he(s,n,"A");c(p.scenarioA),a(p.scenarioB),m(p.surfaceFrom)},[]),u.useEffect(()=>{ue({scenarioA:t,scenarioB:r,surfaceFrom:l})},[t,r,l]);const d=u.useMemo(()=>Q(t),[t]),o=u.useMemo(()=>Q(r),[r]),g=l==="B"?r:t,h=l==="B"?o:d,v=u.useMemo(()=>de({gwp:h.gwp,corridorNm:h.effDistanceNm,engineDefaults:{shippingRatePer1000nm:g.shippingRatePer1000nm},processEnergy:{liquefactionPct:g.liquefactionPct,processingPct:g.processingPct,regasPct:g.regasPct},plantEfficiencyPct:g.plantEffPct,coalBaseline_gPerKWh:g.coalBaseline_gPerKWh,ranges:f.heatmapRanges}),[g,h]),i=u.useMemo(()=>[{id:"A",label:"Scenario A",leakagePct:t.upstreamLeakPct,slipPct:t.methaneSlipPct,ringClass:"border-slate-900",fillClass:"bg-white"},{id:"B",label:"Scenario B",leakagePct:r.upstreamLeakPct,slipPct:r.methaneSlipPct,ringClass:"border-amber-600",fillClass:"bg-white"}],[t.upstreamLeakPct,t.methaneSlipPct,r.upstreamLeakPct,r.methaneSlipPct]),x=u.useMemo(()=>{const p=d.outputs,y=o.outputs;return{total_gCO2e:(p.total_gCO2e??0)-(y.total_gCO2e??0),shippingSharePct:(p.shippingSharePct??0)-(y.shippingSharePct??0),deltaVsCoal_gPerKWh:(p.deltaVsCoal_gPerKWh??0)-(y.deltaVsCoal_gPerKWh??0)}},[d,o]);return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[e.jsx("header",{className:"border-b bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Maritime Corridors: WTW / WTW→Wire Scenario Explorer (A/B)"}),e.jsxs("a",{href:"index.html",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50 hover:border-slate-400 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Main"]})]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-5xl",children:"Two complete scenarios rendered side-by-side. The URL encodes the full state for sharing, and each scenario can be exported (JSON + CSV)."})]})})}),e.jsxs("main",{className:"mx-auto max-w-7xl px-6 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-lg border p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Scenario controls (A/B)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Defaults remain placeholders. Export parameters to preserve exact assumptions used."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Heatmap surface from"}),e.jsxs("select",{className:"rounded-md border px-3 py-2 text-sm",value:l,onChange:p=>m(p.target.value==="B"?"B":"A"),children:[e.jsx("option",{value:"A",children:"Scenario A"}),e.jsx("option",{value:"B",children:"Scenario B"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>a({...t}),title:"Copy Scenario A into Scenario B",children:"Copy A → B"}),e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>c({...r}),title:"Copy Scenario B into Scenario A",children:"Copy B → A"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-5",children:[e.jsx(Y,{label:"Scenario A",accent:"slate",scenario:t,setScenario:c,derived:d}),e.jsx(Y,{label:"Scenario B",accent:"amber",scenario:r,setScenario:a,derived:o})]})]}),e.jsxs("section",{className:"bg-white rounded-lg border p-4 space-y-5",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Outputs (A vs B)"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(L,{title:"Total (gCO₂e per scenario unit)",a:d.outputs.total_gCO2e,b:o.outputs.total_gCO2e,d:x.total_gCO2e,hintA:d.outputs.unitHint,hintB:o.outputs.unitHint}),e.jsx(L,{title:"Shipping share (% of total)",a:d.outputs.shippingSharePct,b:o.outputs.shippingSharePct,d:x.shippingSharePct,isPercent:!0}),e.jsx(L,{title:me(t.boundary),a:d.outputs.deltaVsCoal_gPerKWh,b:o.outputs.deltaVsCoal_gPerKWh,d:x.deltaVsCoal_gPerKWh,hint:"Negative = better than coal; positive = worse than coal (meaningful only in WTW→Wire)."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Stage breakdown (A)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"CO₂ and CH₄ are separated so GWP changes are visible."}),e.jsx("div",{className:"mt-3",children:e.jsx(D,{breakdown:d.outputs.breakdown})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Stage breakdown (B)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"CO₂ and CH₄ are separated so GWP changes are visible."}),e.jsx("div",{className:"mt-3",children:e.jsx(D,{breakdown:o.outputs.breakdown})})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg border p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Break-even surface (leakage × slip)"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Heatmap is computed from"," ",l==="B"?"Scenario B":"Scenario A"," settings for corridor/process/efficiency/baseline. Markers show A and B positions."]}),e.jsx("div",{className:"mt-4",children:e.jsx(ge,{grid:v,markers:i})}),e.jsxs("div",{className:"mt-3 text-xs text-slate-700 flex items-center gap-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-slate-900 bg-white inline-block"}),"A"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-amber-600 bg-white inline-block"}),"B"]})]})]})]})]})}function Y({label:s,accent:n,scenario:t,setScenario:c,derived:r}){const a=r.corridor,l=r.engine,m=n==="amber"?"border-amber-200":"border-slate-200",d=n==="amber"?"text-amber-700":"text-slate-800";function o(i){c(x=>({...x,...i}))}function g(i){const x=W.find(p=>p.id===i)??W[0];o({engineId:i,methaneSlipPct:x.defaultSlipPct,shippingRatePer1000nm:x.shippingEnergyPctPer1000nm})}function h(){const i=Pe(s,t,r);xe(`${s.replaceAll(" ","_").toLowerCase()}.json`,i)}function v(){const i=je(s,r);fe(`${s.replaceAll(" ","_").toLowerCase()}_breakdown.csv`,i)}return e.jsxs("div",{className:`rounded-lg border ${m} p-4`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-semibold ${d}`,children:s}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Effective distance:"," ",e.jsx("span",{className:"font-medium",children:j(r.effDistanceNm)})," ","nm"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-xs hover:bg-slate-50",onClick:h,children:"Export JSON"}),e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-xs hover:bg-slate-50",onClick:v,children:"Export CSV"})]})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(Z,{label:"Boundary",options:[{key:"TTW",label:"TTW"},{key:"WTW",label:"WTW"},{key:"WTWIRE",label:"WTW→Wire"}],value:t.boundary,onChange:i=>o({boundary:i})}),e.jsx(Z,{label:"GWP horizon",options:[{key:"20",label:"GWP20"},{key:"100",label:"GWP100"}],value:t.gwpHorizon,onChange:i=>o({gwpHorizon:i})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Corridor"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:t.corridorId,onChange:i=>o({corridorId:i.target.value}),children:E.map(i=>e.jsxs("option",{value:i.id,children:[i.label," (",j(i.distanceNm)," nm)"]},i.id))}),e.jsx(_,{label:"Distance detour (%)",min:0,max:75,step:1,value:t.detourPct,onChange:i=>o({detourPct:i}),display:`${j(t.detourPct,0)}%`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Vessel / engine family"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:t.engineId,onChange:i=>g(i.target.value),children:W.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))}),e.jsx(_,{label:"Methane slip (% of ship fuel)",min:0,max:4,step:.05,value:t.methaneSlipPct,onChange:i=>o({methaneSlipPct:i}),display:`${j(t.methaneSlipPct,2)}%`}),e.jsx(_,{label:"Shipping energy penalty (% per 1000 nm)",min:.1,max:3.5,step:.05,value:t.shippingRatePer1000nm,onChange:i=>o({shippingRatePer1000nm:i}),display:`${j(t.shippingRatePer1000nm,2)}%`})]}),e.jsx(_,{label:"Upstream leakage (% of produced gas)",min:0,max:8,step:.1,value:t.upstreamLeakPct,onChange:i=>o({upstreamLeakPct:i}),display:`${j(t.upstreamLeakPct,1)}%`}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Process energy penalties"}),e.jsx(_,{label:"Processing",min:0,max:8,step:.1,value:t.processingPct,onChange:i=>o({processingPct:i}),display:`${j(t.processingPct,2)}%`}),e.jsx(_,{label:"Liquefaction",min:0,max:15,step:.1,value:t.liquefactionPct,onChange:i=>o({liquefactionPct:i}),display:`${j(t.liquefactionPct,2)}%`}),e.jsx(_,{label:"Regasification",min:0,max:5,step:.05,value:t.regasPct,onChange:i=>o({regasPct:i}),display:`${j(t.regasPct,2)}%`})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx(_,{label:"Power plant efficiency (for WTW→Wire)",min:35,max:65,step:.5,value:t.plantEffPct,onChange:i=>o({plantEffPct:i}),display:`${j(t.plantEffPct,1)}%`}),e.jsx(_,{label:"Coal baseline (gCO₂e/kWh)",min:650,max:1200,step:10,value:t.coalBaseline_gPerKWh,onChange:i=>o({coalBaseline_gPerKWh:i}),display:`${j(t.coalBaseline_gPerKWh,0)} gCO₂e/kWh`})]}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Current corridor:"," ",e.jsx("span",{className:"font-medium",children:a.label}),". Engine:"," ",e.jsx("span",{className:"font-medium",children:l.label}),"."]})]})]})}function Z({label:s,options:n,value:t,onChange:c}){const r=n.length===2?"grid-cols-2":n.length===3?"grid-cols-3":"grid-cols-1";return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s}),e.jsx("div",{className:`grid ${r} gap-2`,children:n.map(a=>e.jsx("button",{type:"button",className:`rounded-md border px-3 py-2 text-sm ${t===a.key?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-50"}`,onClick:()=>c(a.key),children:a.label},a.key))})]})}function _({label:s,min:n,max:t,step:c,value:r,onChange:a,display:l}){return e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s}),e.jsx("input",{className:"w-full",type:"range",min:n,max:t,step:c,value:r,onChange:m=>a(Number(m.target.value))}),e.jsx("div",{className:"text-xs text-slate-600",children:l})]})}function L({title:s,a:n,b:t,d:c,hintA:r,hintB:a,hint:l,isPercent:m}){const d=o=>o==null||!Number.isFinite(Number(o))?"—":m?`${j(o,1)}%`:j(o,0);return e.jsxs("div",{className:"rounded-md border bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:s}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"A"}),e.jsx("div",{className:"text-lg font-semibold",children:d(n)}),r?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:r}):null]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"B"}),e.jsx("div",{className:"text-lg font-semibold",children:d(t)}),a?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:a}):null]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"A − B"}),e.jsx("div",{className:"text-lg font-semibold",children:d(c)}),l?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:l}):null]})]})]})}oe.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(ve,{})}));
