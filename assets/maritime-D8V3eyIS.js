import{j as e,R as Z,r as u,a as re}from"./index-BM05OmU-.js";const P=(s,n,t)=>Math.max(n,Math.min(t,s)),j=(s,n=0)=>{const t=Number(s);return Number.isFinite(t)?t.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n}):"—"},F={20:{ch4:80,label:"GWP20"},100:{ch4:28,label:"GWP100"}},O=[{id:"gulf_japan_panama",label:"U.S. Gulf → Japan (via Panama)",distanceNm:9e3},{id:"qatar_japan_malacca",label:"Qatar → Japan (via Malacca)",distanceNm:6700},{id:"aus_japan",label:"NW Australia → Japan",distanceNm:3900},{id:"custom_5000",label:"Generic corridor",distanceNm:5e3}],W=[{id:"me_gi",label:"ME-GI / high-pressure dual-fuel (lower slip)",defaultSlipPct:.2,shippingEnergyPctPer1000nm:.8},{id:"x_df",label:"X-DF / low-pressure dual-fuel (higher slip)",defaultSlipPct:1.6,shippingEnergyPctPer1000nm:.9},{id:"steam_turbine",label:"Steam turbine (legacy)",defaultSlipPct:.1,shippingEnergyPctPer1000nm:1.4}],f={upstreamLeakPct:1.5,processingEnergyPct:2,liquefactionEnergyPct:8,regasEnergyPct:1,plantEfficiencyPct:55,coalBaseline_gPerKWh:900,fuelLHV_MJ_per_kg_CH4:50,combustionCO2_g_per_MJ:56,processCO2_g_per_MJ_fuelUsed:56,heatmapRanges:{leakagePct:{min:0,max:6,steps:61},slipPct:{min:0,max:3,steps:61}}};function ee({boundary:s,gwp:n,corridor:t,engine:l,upstreamLeakPct:i,processEnergy:a,plantEfficiencyPct:r,coalBaseline_gPerKWh:m}){const o=t.distanceNm/1e3*P(l.shippingRatePer1000nm,0,10),h=1e3/(1-(P(a.processingPct,0,30)+P(a.liquefactionPct,0,40)+P(a.regasPct,0,15)+P(o,0,60))/100),v=P(a.processingPct,0,30)/100*1e3,c=P(a.liquefactionPct,0,40)/100*1e3,x=P(a.regasPct,0,15)/100*1e3,g=P(o,0,60)/100*1e3,R=h/f.fuelLHV_MJ_per_kg_CH4*P(i,0,20)/100,$=g/f.fuelLHV_MJ_per_kg_CH4*P(l.methaneSlipPct,0,10)/100,S=v*f.processCO2_g_per_MJ_fuelUsed,se=c*f.processCO2_g_per_MJ_fuelUsed,ne=x*f.processCO2_g_per_MJ_fuelUsed,H=g*f.combustionCO2_g_per_MJ,ae=1e3*f.combustionCO2_g_per_MJ,ce=R*1e3*n.ch4,T=$*1e3*n.ch4,C=s==="WTW"||s==="WTWIRE",J=[{stage:"Upstream leakage (CH₄)",co2_g:0,ch4_co2e_g:C?ce:0},{stage:"Processing",co2_g:C?S:0,ch4_co2e_g:0},{stage:"Liquefaction",co2_g:C?se:0,ch4_co2e_g:0},{stage:"Shipping (CO₂)",co2_g:C?H:0,ch4_co2e_g:0},{stage:"Shipping slip (CH₄)",co2_g:0,ch4_co2e_g:C?T:0},{stage:"Regasification",co2_g:C?ne:0,ch4_co2e_g:0},{stage:"Combustion (CO₂)",co2_g:s==="TTW"||s==="WTW"||s==="WTWIRE"?ae:0,ch4_co2e_g:0}],M=J.reduce((q,E)=>q+E.co2_g+E.ch4_co2e_g,0),ie=C?H+T:0,le=M>0?ie/M*100:0;let I=null,K="Scenario unit = 1,000 MJ delivered fuel energy";if(s==="WTWIRE"){const E=1e3*(P(r,10,75)/100)/3.6;I=M/E-m,K=`Converted using plant efficiency (${r}%) → gCO₂e/kWh`}return{total_gCO2e:M,breakdown:J,shippingSharePct:le,deltaVsCoal_gPerKWh:I,unitHint:K}}function oe({gwp:s,corridorNm:n,engineDefaults:t,processEnergy:l,plantEfficiencyPct:i,coalBaseline_gPerKWh:a,ranges:r}){const m=r.leakagePct,d=r.slipPct,o=[];for(let p=0;p<d.steps;p++){const h=d.min+p*(d.max-d.min)/(d.steps-1),v=[];for(let c=0;c<m.steps;c++){const x=m.min+c*(m.max-m.min)/(m.steps-1),g=ee({boundary:"WTWIRE",gwp:s,corridor:{distanceNm:n},engine:{methaneSlipPct:h,shippingRatePer1000nm:t.shippingRatePer1000nm},upstreamLeakPct:x,processEnergy:l,plantEfficiencyPct:i,coalBaseline_gPerKWh:a});v.push(g.deltaVsCoal_gPerKWh??0)}o.push(v)}return{leakage:m,slip:d,values:o,coalBaseline_gPerKWh:a,gwpLabel:s.label}}function de(s){return"Δ vs coal baseline"}const w={co2:"#0f172a",ch4:"#b91c1c",bg:"#f8fafc",border:"#e2e8f0"};function D({breakdown:s}){const n=s.reduce((t,l)=>t+l.co2_g+l.ch4_co2e_g,0);return!Number.isFinite(n)||n<=0?e.jsx("div",{className:"rounded-md border p-4 text-sm text-slate-600",children:"No emissions in current boundary selection."}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full rounded-md border overflow-hidden",style:{background:w.bg,borderColor:w.border},children:e.jsx("div",{className:"flex w-full h-10",children:s.map((t,l)=>{const i=(t.co2_g||0)/n*100,a=(t.ch4_co2e_g||0)/n*100;return e.jsxs(Z.Fragment,{children:[i>.2?e.jsx("div",{title:`${t.stage}: CO₂ ${(t.co2_g||0).toFixed(0)} g`,style:{width:`${i}%`,background:w.co2}}):null,a>.2?e.jsx("div",{title:`${t.stage}: CH₄ (CO₂e) ${(t.ch4_co2e_g||0).toFixed(0)} g`,style:{width:`${a}%`,background:w.ch4}}):null]},l)})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map((t,l)=>{const i=t.co2_g||0,a=t.ch4_co2e_g||0,r=(i+a)/n*100;return e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-sm font-medium",children:t.stage}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Share: ",r.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-slate-700 mt-2 flex gap-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:w.co2}}),"CO₂: ",i.toFixed(0)," g"]}),e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:w.ch4}}),"CH₄ (CO₂e): ",a.toFixed(0)," g"]})]})]},l)})}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Color key: ",e.jsx("span",{className:"font-medium",children:"CO₂"})," (dark) and"," ",e.jsx("span",{className:"font-medium",children:"CH₄ as CO₂e"})," (red)."]})]})}function k(s,n,t){return s+(n-s)*t}function me(s,n,t){const l=(s-n)/(t-n||1),i=Math.max(0,Math.min(1,l)),a=(0-n)/(t-n||1);if(i<a){const r=i/(a||1),m=k(16,255,r),d=k(185,255,r),o=k(129,255,r);return`rgb(${m|0},${d|0},${o|0})`}else{const r=(i-a)/(1-a||1),m=k(255,185,r),d=k(255,28,r),o=k(255,28,r);return`rgb(${m|0},${d|0},${o|0})`}}function U(s){return Math.max(0,Math.min(1,s))}function ge(s,n){const t=s.leakage,l=s.slip,i=(n.leakagePct-t.min)/(t.max-t.min||1),a=(n.slipPct-l.min)/(l.max-l.min||1);return{x:U(i),y:U(a)}}function pe({grid:s,markers:n=[]}){const t=u.useRef(null),l=u.useMemo(()=>{let a=1/0,r=-1/0;for(const d of s.values)for(const o of d)o<a&&(a=o),o>r&&(r=o);const m=Math.max(Math.abs(a),Math.abs(r));return{min:-m,max:m}},[s]);u.useEffect(()=>{var v;const a=t.current;if(!a)return;const r=a.width,m=a.height,d=a.getContext("2d");if(!d)return;const o=s.values.length,p=((v=s.values[0])==null?void 0:v.length)??0,h=d.createImageData(r,m);for(let c=0;c<m;c++){const x=Math.floor(c/m*o);for(let g=0;g<r;g++){const y=Math.floor(g/r*p),R=s.values[x][y],$=me(R,l.min,l.max).match(/\d+/g).map(Number),S=(c*r+g)*4;h.data[S]=$[0],h.data[S+1]=$[1],h.data[S+2]=$[2],h.data[S+3]=255}}d.putImageData(h,0,0)},[s,l]);const i=u.useMemo(()=>n.map(a=>({...a,pos:ge(s,a)})),[s,n]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative rounded-md border overflow-hidden bg-white",children:[e.jsx("canvas",{ref:t,width:720,height:420,className:"block w-full h-auto"}),i.map(a=>e.jsx("div",{className:"absolute",style:{left:`${a.pos.x*100}%`,top:`${a.pos.y*100}%`,transform:"translate(-50%, -50%)"},title:`${a.label}: leakage ${a.leakagePct}%, slip ${a.slipPct}%`,children:e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${a.ringClass} ${a.fillClass}`})},a.id))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-slate-700",children:[e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"X-axis"}),e.jsx("div",{children:"Upstream leakage (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.leakage.min,"–",s.leakage.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Y-axis"}),e.jsx("div",{children:"Methane slip (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.slip.min,"–",s.slip.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Color"}),e.jsx("div",{children:"Δ vs coal (gCO₂e/kWh)"}),e.jsx("div",{className:"text-slate-600",children:"Green = better than coal; red = worse than coal"})]})]})]})}function N(s,n){const t=Number(s);return Number.isFinite(t)?t:n}function B(s,n){return typeof s=="string"&&s.length?s:n}function b(s,n,t){t!=null&&s.set(n,String(t))}function G(s,n){const t=new URLSearchParams;return b(t,`${s}b`,n.boundary),b(t,`${s}g`,n.gwpHorizon),b(t,`${s}c`,n.corridorId),b(t,`${s}e`,n.engineId),b(t,`${s}ul`,n.upstreamLeakPct),b(t,`${s}ms`,n.methaneSlipPct),b(t,`${s}pe`,n.plantEffPct),b(t,`${s}cb`,n.coalBaseline_gPerKWh),b(t,`${s}dt`,n.detourPct),b(t,`${s}sr`,n.shippingRatePer1000nm),b(t,`${s}liq`,n.liquefactionPct),b(t,`${s}pro`,n.processingPct),b(t,`${s}reg`,n.regasPct),t}function V(s,n,t){return{...t,boundary:B(n.get(`${s}b`),t.boundary),gwpHorizon:B(n.get(`${s}g`),t.gwpHorizon),corridorId:B(n.get(`${s}c`),t.corridorId),engineId:B(n.get(`${s}e`),t.engineId),upstreamLeakPct:N(n.get(`${s}ul`),t.upstreamLeakPct),methaneSlipPct:N(n.get(`${s}ms`),t.methaneSlipPct),plantEffPct:N(n.get(`${s}pe`),t.plantEffPct),coalBaseline_gPerKWh:N(n.get(`${s}cb`),t.coalBaseline_gPerKWh),detourPct:N(n.get(`${s}dt`),t.detourPct),shippingRatePer1000nm:N(n.get(`${s}sr`),t.shippingRatePer1000nm),liquefactionPct:N(n.get(`${s}liq`),t.liquefactionPct),processingPct:N(n.get(`${s}pro`),t.processingPct),regasPct:N(n.get(`${s}reg`),t.regasPct)}}function ue({scenarioA:s,scenarioB:n,surfaceFrom:t}){const l=G("a",s),i=G("b",n),a=new URLSearchParams;for(const[m,d]of l.entries())a.set(m,d);for(const[m,d]of i.entries())a.set(m,d);a.set("surf",t);const r=`${window.location.pathname}?${a.toString()}`;window.history.replaceState(null,"",r)}function he(s,n,t="A"){const l=new URLSearchParams(window.location.search),i=B(l.get("surf"),t);return{scenarioA:V("a",l,s),scenarioB:V("b",l,n),surfaceFrom:i==="B"?"B":"A"}}function A(s,n){const t=URL.createObjectURL(n),l=document.createElement("a");l.href=t,l.download=s,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(t)}function xe(s,n){const t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});A(s,t)}function fe(s,n){if(!n||!n.length){A(s,new Blob([""],{type:"text/csv"}));return}const t=Object.keys(n[0]),l=a=>{const r=String(a??"");return/[",\n]/.test(r)?`"${r.replaceAll('"','""')}"`:r},i=[t.join(","),...n.map(a=>t.map(r=>l(a[r])).join(","))];A(s,new Blob([i.join(`
`)],{type:"text/csv"}))}function z(){const s=W[0];return{boundary:"WTW",gwpHorizon:"100",corridorId:O[0].id,engineId:s.id,upstreamLeakPct:f.upstreamLeakPct,methaneSlipPct:s.defaultSlipPct,plantEffPct:f.plantEfficiencyPct,coalBaseline_gPerKWh:f.coalBaseline_gPerKWh,detourPct:0,shippingRatePer1000nm:s.shippingEnergyPctPer1000nm,liquefactionPct:f.liquefactionEnergyPct,processingPct:f.processingEnergyPct,regasPct:f.regasEnergyPct}}function be(s,n){return s.distanceNm*(1+P(n,0,200)/100)}function X(s){const n=O.find(r=>r.id===s.corridorId)??O[0],t=W.find(r=>r.id===s.engineId)??W[0],l=F[s.gwpHorizon]??F[100],i=be(n,s.detourPct),a=ee({boundary:s.boundary,gwp:l,corridor:{...n,distanceNm:i},engine:{...t,methaneSlipPct:s.methaneSlipPct,shippingRatePer1000nm:s.shippingRatePer1000nm},upstreamLeakPct:s.upstreamLeakPct,processEnergy:{liquefactionPct:s.liquefactionPct,processingPct:s.processingPct,regasPct:s.regasPct},plantEfficiencyPct:s.plantEffPct,coalBaseline_gPerKWh:s.coalBaseline_gPerKWh});return{corridor:n,engine:t,gwp:l,effDistanceNm:i,outputs:a}}function Pe(s,n,t){return{label:s,parameters:n,derived:{corridor:t.corridor,engine:t.engine,gwp:t.gwp,effectiveDistanceNm:t.effDistanceNm},outputs:t.outputs,exportedAt:new Date().toISOString()}}function je(s,n){return n.outputs.breakdown.map(t=>({scenario:s,stage:t.stage,co2_g:t.co2_g,ch4_co2e_g:t.ch4_co2e_g,total_stage_gco2e:(t.co2_g||0)+(t.ch4_co2e_g||0)}))}function ve(){const s=u.useMemo(()=>z(),[]),n=u.useMemo(()=>({...z(),gwpHorizon:"20"}),[]),[t,l]=u.useState(s),[i,a]=u.useState(n),[r,m]=u.useState("A");u.useEffect(()=>{const g=he(s,n,"A");l(g.scenarioA),a(g.scenarioB),m(g.surfaceFrom)},[]),u.useEffect(()=>{ue({scenarioA:t,scenarioB:i,surfaceFrom:r})},[t,i,r]);const d=u.useMemo(()=>X(t),[t]),o=u.useMemo(()=>X(i),[i]),p=r==="B"?i:t,h=r==="B"?o:d,v=u.useMemo(()=>oe({gwp:h.gwp,corridorNm:h.effDistanceNm,engineDefaults:{shippingRatePer1000nm:p.shippingRatePer1000nm},processEnergy:{liquefactionPct:p.liquefactionPct,processingPct:p.processingPct,regasPct:p.regasPct},plantEfficiencyPct:p.plantEffPct,coalBaseline_gPerKWh:p.coalBaseline_gPerKWh,ranges:f.heatmapRanges}),[p,h]),c=u.useMemo(()=>[{id:"A",label:"Scenario A",leakagePct:t.upstreamLeakPct,slipPct:t.methaneSlipPct,ringClass:"border-slate-900",fillClass:"bg-white"},{id:"B",label:"Scenario B",leakagePct:i.upstreamLeakPct,slipPct:i.methaneSlipPct,ringClass:"border-amber-600",fillClass:"bg-white"}],[t.upstreamLeakPct,t.methaneSlipPct,i.upstreamLeakPct,i.methaneSlipPct]),x=u.useMemo(()=>{const g=d.outputs,y=o.outputs;return{total_gCO2e:(g.total_gCO2e??0)-(y.total_gCO2e??0),shippingSharePct:(g.shippingSharePct??0)-(y.shippingSharePct??0),deltaVsCoal_gPerKWh:(g.deltaVsCoal_gPerKWh??0)-(y.deltaVsCoal_gPerKWh??0)}},[d,o]);return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[e.jsx("header",{className:"border-b bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Maritime Corridors: WTW / WTW→Wire Scenario Explorer (A/B)"}),e.jsxs("a",{href:"index.html",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50 hover:border-slate-400 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Main"]})]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-5xl",children:"Two complete scenarios rendered side-by-side. The URL encodes the full state for sharing, and each scenario can be exported (JSON + CSV)."})]})})}),e.jsxs("main",{className:"mx-auto max-w-7xl px-6 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-lg border p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Scenario controls (A/B)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Defaults remain placeholders. Export parameters to preserve exact assumptions used."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Heatmap surface from"}),e.jsxs("select",{className:"rounded-md border px-3 py-2 text-sm",value:r,onChange:g=>m(g.target.value==="B"?"B":"A"),children:[e.jsx("option",{value:"A",children:"Scenario A"}),e.jsx("option",{value:"B",children:"Scenario B"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>a({...t}),title:"Copy Scenario A into Scenario B",children:"Copy A → B"}),e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm hover:bg-slate-50",onClick:()=>l({...i}),title:"Copy Scenario B into Scenario A",children:"Copy B → A"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-5",children:[e.jsx(Q,{label:"Scenario A",accent:"slate",scenario:t,setScenario:l,derived:d}),e.jsx(Q,{label:"Scenario B",accent:"amber",scenario:i,setScenario:a,derived:o})]})]}),e.jsxs("section",{className:"bg-white rounded-lg border p-4 space-y-5",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Outputs (A vs B)"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(L,{title:"Total (gCO₂e per scenario unit)",a:d.outputs.total_gCO2e,b:o.outputs.total_gCO2e,d:x.total_gCO2e,hintA:d.outputs.unitHint,hintB:o.outputs.unitHint}),e.jsx(L,{title:"Shipping share (% of total)",a:d.outputs.shippingSharePct,b:o.outputs.shippingSharePct,d:x.shippingSharePct,isPercent:!0}),e.jsx(L,{title:de(t.boundary),a:d.outputs.deltaVsCoal_gPerKWh,b:o.outputs.deltaVsCoal_gPerKWh,d:x.deltaVsCoal_gPerKWh,hint:"Negative = better than coal; positive = worse than coal (meaningful only in WTW→Wire)."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Stage breakdown (A)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"CO₂ and CH₄ are separated so GWP changes are visible."}),e.jsx("div",{className:"mt-3",children:e.jsx(D,{breakdown:d.outputs.breakdown})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Stage breakdown (B)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"CO₂ and CH₄ are separated so GWP changes are visible."}),e.jsx("div",{className:"mt-3",children:e.jsx(D,{breakdown:o.outputs.breakdown})})]})]})]}),e.jsxs("section",{className:"bg-white rounded-lg border p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Break-even surface (leakage × slip)"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Heatmap is computed from"," ",r==="B"?"Scenario B":"Scenario A"," settings for corridor/process/efficiency/baseline. Markers show A and B positions."]}),e.jsx("div",{className:"mt-4",children:e.jsx(pe,{grid:v,markers:c})}),e.jsxs("div",{className:"mt-3 text-xs text-slate-700 flex items-center gap-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-slate-900 bg-white inline-block"}),"A"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-amber-600 bg-white inline-block"}),"B"]})]})]})]})]})}function Q({label:s,accent:n,scenario:t,setScenario:l,derived:i}){const a=i.corridor,r=i.engine,m=n==="amber"?"border-amber-200":"border-slate-200",d=n==="amber"?"text-amber-700":"text-slate-800";function o(c){l(x=>({...x,...c}))}function p(c){const x=W.find(g=>g.id===c)??W[0];o({engineId:c,methaneSlipPct:x.defaultSlipPct,shippingRatePer1000nm:x.shippingEnergyPctPer1000nm})}function h(){const c=Pe(s,t,i);xe(`${s.replaceAll(" ","_").toLowerCase()}.json`,c)}function v(){const c=je(s,i);fe(`${s.replaceAll(" ","_").toLowerCase()}_breakdown.csv`,c)}return e.jsxs("div",{className:`rounded-lg border ${m} p-4`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-semibold ${d}`,children:s}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Effective distance:"," ",e.jsx("span",{className:"font-medium",children:j(i.effDistanceNm)})," ","nm"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-xs hover:bg-slate-50",onClick:h,children:"Export JSON"}),e.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-xs hover:bg-slate-50",onClick:v,children:"Export CSV"})]})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(Y,{label:"Boundary",options:[{key:"TTW",label:"TTW"},{key:"WTW",label:"WTW"},{key:"WTWIRE",label:"WTW→Wire"}],value:t.boundary,onChange:c=>o({boundary:c})}),e.jsx(Y,{label:"GWP horizon",options:[{key:"20",label:"GWP20"},{key:"100",label:"GWP100"}],value:t.gwpHorizon,onChange:c=>o({gwpHorizon:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Corridor"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:t.corridorId,onChange:c=>o({corridorId:c.target.value}),children:O.map(c=>e.jsxs("option",{value:c.id,children:[c.label," (",j(c.distanceNm)," nm)"]},c.id))}),e.jsx(_,{label:"Distance detour (%)",min:0,max:75,step:1,value:t.detourPct,onChange:c=>o({detourPct:c}),display:`${j(t.detourPct,0)}%`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Vessel / engine family"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:t.engineId,onChange:c=>p(c.target.value),children:W.map(c=>e.jsx("option",{value:c.id,children:c.label},c.id))}),e.jsx(_,{label:"Methane slip (% of ship fuel)",min:0,max:4,step:.05,value:t.methaneSlipPct,onChange:c=>o({methaneSlipPct:c}),display:`${j(t.methaneSlipPct,2)}%`}),e.jsx(_,{label:"Shipping energy penalty (% per 1000 nm)",min:.1,max:3.5,step:.05,value:t.shippingRatePer1000nm,onChange:c=>o({shippingRatePer1000nm:c}),display:`${j(t.shippingRatePer1000nm,2)}%`})]}),e.jsx(_,{label:"Upstream leakage (% of produced gas)",min:0,max:8,step:.1,value:t.upstreamLeakPct,onChange:c=>o({upstreamLeakPct:c}),display:`${j(t.upstreamLeakPct,1)}%`}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Process energy penalties"}),e.jsx(_,{label:"Processing",min:0,max:8,step:.1,value:t.processingPct,onChange:c=>o({processingPct:c}),display:`${j(t.processingPct,2)}%`}),e.jsx(_,{label:"Liquefaction",min:0,max:15,step:.1,value:t.liquefactionPct,onChange:c=>o({liquefactionPct:c}),display:`${j(t.liquefactionPct,2)}%`}),e.jsx(_,{label:"Regasification",min:0,max:5,step:.05,value:t.regasPct,onChange:c=>o({regasPct:c}),display:`${j(t.regasPct,2)}%`})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx(_,{label:"Power plant efficiency (for WTW→Wire)",min:35,max:65,step:.5,value:t.plantEffPct,onChange:c=>o({plantEffPct:c}),display:`${j(t.plantEffPct,1)}%`}),e.jsx(_,{label:"Coal baseline (gCO₂e/kWh)",min:650,max:1200,step:10,value:t.coalBaseline_gPerKWh,onChange:c=>o({coalBaseline_gPerKWh:c}),display:`${j(t.coalBaseline_gPerKWh,0)} gCO₂e/kWh`})]}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Current corridor:"," ",e.jsx("span",{className:"font-medium",children:a.label}),". Engine:"," ",e.jsx("span",{className:"font-medium",children:r.label}),"."]})]})]})}function Y({label:s,options:n,value:t,onChange:l}){const i=n.length===2?"grid-cols-2":n.length===3?"grid-cols-3":"grid-cols-1";return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s}),e.jsx("div",{className:`grid ${i} gap-2`,children:n.map(a=>e.jsx("button",{type:"button",className:`rounded-md border px-3 py-2 text-sm ${t===a.key?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-50"}`,onClick:()=>l(a.key),children:a.label},a.key))})]})}function _({label:s,min:n,max:t,step:l,value:i,onChange:a,display:r}){return e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s}),e.jsx("input",{className:"w-full",type:"range",min:n,max:t,step:l,value:i,onChange:m=>a(Number(m.target.value))}),e.jsx("div",{className:"text-xs text-slate-600",children:r})]})}function L({title:s,a:n,b:t,d:l,hintA:i,hintB:a,hint:r,isPercent:m}){const d=o=>o==null||!Number.isFinite(Number(o))?"—":m?`${j(o,1)}%`:j(o,0);return e.jsxs("div",{className:"rounded-md border bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:s}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"A"}),e.jsx("div",{className:"text-lg font-semibold",children:d(n)}),i?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:i}):null]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"B"}),e.jsx("div",{className:"text-lg font-semibold",children:d(t)}),a?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:a}):null]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"A − B"}),e.jsx("div",{className:"text-lg font-semibold",children:d(l)}),r?e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:r}):null]})]})]})}re.createRoot(document.getElementById("root")).render(e.jsx(Z.StrictMode,{children:e.jsx(ve,{})}));
