import{j as e,R as z,r as x,a as X}from"./index-BIFTh5ku.js";const h=(s,n,l)=>Math.max(n,Math.min(l,s)),_=(s,n=0)=>{const l=Number(s);return Number.isFinite(l)?l.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n}):"—"},Q={20:{ch4:80,label:"GWP20"},100:{ch4:28,label:"GWP100"}},q=[{id:"gulf_japan_panama",label:"U.S. Gulf → Japan (via Panama)",distanceNm:9e3},{id:"qatar_japan_malacca",label:"Qatar → Japan (via Malacca)",distanceNm:6700},{id:"aus_japan",label:"NW Australia → Japan",distanceNm:3900},{id:"custom_5000",label:"Generic corridor",distanceNm:5e3}],I=[{id:"me_gi",label:"ME-GI / high-pressure dual-fuel (lower slip)",defaultSlipPct:.2,shippingEnergyPctPer1000nm:.8},{id:"x_df",label:"X-DF / low-pressure dual-fuel (higher slip)",defaultSlipPct:1.6,shippingEnergyPctPer1000nm:.9},{id:"steam_turbine",label:"Steam turbine (legacy)",defaultSlipPct:.1,shippingEnergyPctPer1000nm:1.4}],u={upstreamLeakPct:1.5,processingEnergyPct:2,liquefactionEnergyPct:8,regasEnergyPct:1,plantEfficiencyPct:55,coalBaseline_gPerKWh:900,fuelLHV_MJ_per_kg_CH4:50,combustionCO2_g_per_MJ:56,processCO2_g_per_MJ_fuelUsed:56,heatmapRanges:{leakagePct:{min:0,max:6,steps:61},slipPct:{min:0,max:3,steps:61}}};function A({boundary:s,gwp:n,corridor:l,engine:o,upstreamLeakPct:d,processEnergy:a,plantEfficiencyPct:i,coalBaseline_gPerKWh:r}){const m=l.distanceNm/1e3*h(o.shippingRatePer1000nm,0,10),b=1e3/(1-(h(a.processingPct,0,30)+h(a.liquefactionPct,0,40)+h(a.regasPct,0,15)+h(m,0,60))/100),p=h(a.processingPct,0,30)/100*1e3,g=h(a.liquefactionPct,0,40)/100*1e3,N=h(a.regasPct,0,15)/100*1e3,v=h(m,0,60)/100*1e3,H=b/u.fuelLHV_MJ_per_kg_CH4*h(d,0,20)/100,w=v/u.fuelLHV_MJ_per_kg_CH4*h(o.methaneSlipPct,0,10)/100,f=p*u.processCO2_g_per_MJ_fuelUsed,L=g*u.processCO2_g_per_MJ_fuelUsed,M=N*u.processCO2_g_per_MJ_fuelUsed,$=v*u.combustionCO2_g_per_MJ,S=1e3*u.combustionCO2_g_per_MJ,B=H*1e3*n.ch4,W=w*1e3*n.ch4,y=s==="WTW"||s==="WTWIRE",k=[{stage:"Upstream leakage (CH₄)",co2_g:0,ch4_co2e_g:y?B:0},{stage:"Processing",co2_g:y?f:0,ch4_co2e_g:0},{stage:"Liquefaction",co2_g:y?L:0,ch4_co2e_g:0},{stage:"Shipping (CO₂)",co2_g:y?$:0,ch4_co2e_g:0},{stage:"Shipping slip (CH₄)",co2_g:0,ch4_co2e_g:y?W:0},{stage:"Regasification",co2_g:y?M:0,ch4_co2e_g:0},{stage:"Combustion (CO₂)",co2_g:s==="TTW"||s==="WTW"||s==="WTWIRE"?S:0,ch4_co2e_g:0}],T=k.reduce((V,K)=>V+K.co2_g+K.ch4_co2e_g,0),t=y?$+W:0,G=T>0?t/T*100:0;let O=null,F="Scenario unit = 1,000 MJ delivered fuel energy";if(s==="WTWIRE"){const K=1e3*(h(i,10,75)/100)/3.6;O=T/K-r,F=`Converted using plant efficiency (${i}%) → gCO₂e/kWh`}return{total_gCO2e:T,breakdown:k,shippingSharePct:G,deltaVsCoal_gPerKWh:O,unitHint:F}}function Y({gwp:s,corridorNm:n,engineDefaults:l,processEnergy:o,plantEfficiencyPct:d,coalBaseline_gPerKWh:a,ranges:i}){const r=i.leakagePct,c=i.slipPct,m=[];for(let j=0;j<c.steps;j++){const b=c.min+j*(c.max-c.min)/(c.steps-1),p=[];for(let g=0;g<r.steps;g++){const N=r.min+g*(r.max-r.min)/(r.steps-1),v=A({boundary:"WTWIRE",gwp:s,corridor:{distanceNm:n},engine:{methaneSlipPct:b,shippingRatePer1000nm:l.shippingRatePer1000nm},upstreamLeakPct:N,processEnergy:o,plantEfficiencyPct:d,coalBaseline_gPerKWh:a});p.push(v.deltaVsCoal_gPerKWh??0)}m.push(p)}return{leakage:r,slip:c,values:m,coalBaseline_gPerKWh:a,gwpLabel:s.label}}function Z(s){return"Δ vs coal baseline"}const E={co2:"#0f172a",ch4:"#b91c1c",bg:"#f8fafc",border:"#e2e8f0"};function ee({breakdown:s}){const n=s.reduce((l,o)=>l+o.co2_g+o.ch4_co2e_g,0);return!Number.isFinite(n)||n<=0?e.jsx("div",{className:"rounded-md border p-4 text-sm text-slate-600",children:"No emissions in current boundary selection."}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full rounded-md border overflow-hidden",style:{background:E.bg,borderColor:E.border},children:e.jsx("div",{className:"flex w-full h-10",children:s.map((l,o)=>{const d=(l.co2_g||0)/n*100,a=(l.ch4_co2e_g||0)/n*100;return e.jsxs(z.Fragment,{children:[d>.2?e.jsx("div",{title:`${l.stage}: CO₂ ${(l.co2_g||0).toFixed(0)} g`,style:{width:`${d}%`,background:E.co2}}):null,a>.2?e.jsx("div",{title:`${l.stage}: CH₄ (CO₂e) ${(l.ch4_co2e_g||0).toFixed(0)} g`,style:{width:`${a}%`,background:E.ch4}}):null]},o)})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map((l,o)=>{const d=l.co2_g||0,a=l.ch4_co2e_g||0,i=(d+a)/n*100;return e.jsxs("div",{className:"rounded-md border p-3",children:[e.jsx("div",{className:"text-sm font-medium",children:l.stage}),e.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["Share: ",i.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-slate-700 mt-2 flex gap-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:E.co2}}),"CO₂: ",d.toFixed(0)," g"]}),e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-sm mr-2 align-middle",style:{background:E.ch4}}),"CH₄ (CO₂e): ",a.toFixed(0)," g"]})]})]},o)})}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Color key: ",e.jsx("span",{className:"font-medium",children:"CO₂"})," (dark) and"," ",e.jsx("span",{className:"font-medium",children:"CH₄ as CO₂e"})," (red)."]})]})}function R(s,n,l){return s+(n-s)*l}function se(s,n,l){const o=(s-n)/(l-n||1),d=Math.max(0,Math.min(1,o)),a=(0-n)/(l-n||1);if(d<a){const i=d/(a||1),r=R(16,255,i),c=R(185,255,i),m=R(129,255,i);return`rgb(${r|0},${c|0},${m|0})`}else{const i=(d-a)/(1-a||1),r=R(255,185,i),c=R(255,28,i),m=R(255,28,i);return`rgb(${r|0},${c|0},${m|0})`}}function te({grid:s,marker:n}){const l=x.useRef(null),o=x.useMemo(()=>{let a=1/0,i=-1/0;for(const c of s.values)for(const m of c)m<a&&(a=m),m>i&&(i=m);const r=Math.max(Math.abs(a),Math.abs(i));return{min:-r,max:r}},[s]);x.useEffect(()=>{var p;const a=l.current;if(!a)return;const i=a.width,r=a.height,c=a.getContext("2d");if(!c)return;const m=s.values.length,j=((p=s.values[0])==null?void 0:p.length)??0,b=c.createImageData(i,r);for(let g=0;g<r;g++){const N=Math.floor(g/r*m);for(let v=0;v<i;v++){const P=Math.floor(v/i*j),H=s.values[N][P],w=se(H,o.min,o.max).match(/\d+/g).map(Number),f=(g*i+v)*4;b.data[f]=w[0],b.data[f+1]=w[1],b.data[f+2]=w[2],b.data[f+3]=255}}c.putImageData(b,0,0)},[s,o]);const d=x.useMemo(()=>{const a=s.leakage,i=s.slip,r=(n.leakagePct-a.min)/(a.max-a.min||1),c=(n.slipPct-i.min)/(i.max-i.min||1);return{x:Math.max(0,Math.min(1,r)),y:Math.max(0,Math.min(1,c))}},[s,n]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative rounded-md border overflow-hidden bg-white",children:[e.jsx("canvas",{ref:l,width:720,height:420,className:"block w-full h-auto"}),e.jsx("div",{className:"absolute",style:{left:`${d.x*100}%`,top:`${d.y*100}%`,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-900 bg-white"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-slate-700",children:[e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"X-axis"}),e.jsx("div",{children:"Upstream leakage (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.leakage.min,"–",s.leakage.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Y-axis"}),e.jsx("div",{children:"Methane slip (%)"}),e.jsxs("div",{className:"text-slate-600",children:["Range: ",s.slip.min,"–",s.slip.max]})]}),e.jsxs("div",{className:"rounded-md border p-2",children:[e.jsx("div",{className:"font-medium",children:"Color"}),e.jsx("div",{children:"Δ vs coal (gCO₂e/kWh)"}),e.jsx("div",{className:"text-slate-600",children:"Green = better than coal; red = worse than coal"})]})]})]})}function ae(){const[s,n]=x.useState("WTW"),[l,o]=x.useState("100"),[d,a]=x.useState(q[0].id),[i,r]=x.useState(I[0].id),c=x.useMemo(()=>q.find(t=>t.id===d)??q[0],[d]),m=x.useMemo(()=>I.find(t=>t.id===i)??I[0],[i]),[j,b]=x.useState(u.upstreamLeakPct),[p,g]=x.useState(m.defaultSlipPct),[N,v]=x.useState(u.plantEfficiencyPct),[P,H]=x.useState(u.coalBaseline_gPerKWh),[C,w]=x.useState(0),[f,L]=x.useState(m.shippingEnergyPctPer1000nm),[M,$]=x.useState(u.liquefactionEnergyPct),[S,B]=x.useState(u.processingEnergyPct),[W,y]=x.useState(u.regasEnergyPct),J=Q[l],k=x.useMemo(()=>{const t=c.distanceNm*(1+h(C,0,200)/100);return A({boundary:s,gwp:J,corridor:{...c,distanceNm:t},engine:{...m,methaneSlipPct:p,shippingRatePer1000nm:f},upstreamLeakPct:j,processEnergy:{liquefactionPct:M,processingPct:S,regasPct:W},plantEfficiencyPct:N,coalBaseline_gPerKWh:P})},[s,J,c,m,p,j,C,f,M,S,W,N,P]),T=x.useMemo(()=>Y({gwp:J,corridorNm:c.distanceNm*(1+h(C,0,200)/100),engineDefaults:{shippingRatePer1000nm:f},processEnergy:{liquefactionPct:M,processingPct:S,regasPct:W},plantEfficiencyPct:N,coalBaseline_gPerKWh:P,ranges:u.heatmapRanges}),[J,c.distanceNm,C,f,M,S,W,N,P]);return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[e.jsx("header",{className:"border-b bg-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Maritime Corridors: Well-to-Wake and Well-to-Wire Scenario Explorer"}),e.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50 hover:border-slate-400 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Main"]})]}),e.jsx("p",{className:"text-sm text-slate-600 max-w-4xl",children:"This page is intentionally independent from the main visualization. It makes boundary choices explicit (TTW vs WTW vs WTWIRE) and exposes how corridor distance, methane slip, upstream leakage, and GWP horizon reshape outcomes."})]})})}),e.jsx("main",{className:"mx-auto max-w-7xl px-6 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("section",{className:"lg:col-span-4",children:e.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Scenario controls"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Defaults are placeholders. Replace factor values as you finalize the bibliography and preferred accounting conventions."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Boundary"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{key:"TTW",label:"TTW"},{key:"WTW",label:"WTW"},{key:"WTWIRE",label:"WTW→Wire"}].map(t=>e.jsx("button",{className:`rounded-md border px-3 py-2 text-sm ${s===t.key?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-50"}`,onClick:()=>n(t.key),type:"button",children:t.label},t.key))}),e.jsx("p",{className:"text-xs text-slate-600",children:"TTW = end-use combustion only. WTW adds upstream + processing + liquefaction + shipping + regas. WTW→Wire converts per-fuel totals into per-kWh using plant efficiency and compares to a coal baseline."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"GWP horizon"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["20","100"].map(t=>e.jsxs("button",{className:`rounded-md border px-3 py-2 text-sm ${l===t?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-50"}`,onClick:()=>o(t),type:"button",children:["GWP",t]},t))}),e.jsx("p",{className:"text-xs text-slate-600",children:"Methane is heavily reweighted under GWP20. This toggle changes CH4’s CO₂e contribution live."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Corridor"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:d,onChange:t=>a(t.target.value),children:q.map(t=>e.jsxs("option",{value:t.id,children:[t.label," (",_(t.distanceNm)," nm)"]},t.id))}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Distance detour (%)"}),e.jsx("input",{className:"w-full",type:"range",min:0,max:75,step:1,value:C,onChange:t=>w(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:["Effective distance:"," ",e.jsx("span",{className:"font-medium",children:_(c.distanceNm*(1+C/100))})," ","nm"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Vessel / engine family"}),e.jsx("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:i,onChange:t=>{const G=t.target.value;r(G);const O=I.find(F=>F.id===G);O&&(g(O.defaultSlipPct),L(O.shippingEnergyPctPer1000nm))},children:I.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Methane slip (% of ship fuel)"}),e.jsx("input",{className:"w-full",type:"range",min:0,max:4,step:.05,value:p,onChange:t=>g(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(p,2),"%"]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Shipping energy penalty (% per 1000 nm)"}),e.jsx("input",{className:"w-full",type:"range",min:.1,max:3.5,step:.05,value:f,onChange:t=>L(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(f,2),"% per 1000 nm"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Upstream leakage (% of produced gas)"}),e.jsx("input",{className:"w-full",type:"range",min:0,max:8,step:.1,value:j,onChange:t=>b(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(j,1),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Process energy penalties"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(D,{label:"Processing",value:S,setValue:B,min:0,max:8,step:.1,suffix:"%"}),e.jsx(D,{label:"Liquefaction",value:M,setValue:$,min:0,max:15,step:.1,suffix:"%"}),e.jsx(D,{label:"Regasification",value:W,setValue:y,min:0,max:5,step:.05,suffix:"%"})]})]}),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Power plant efficiency (for WTW→Wire)"}),e.jsx("input",{className:"w-full",type:"range",min:35,max:65,step:.5,value:N,onChange:t=>v(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(N,1),"%"]}),e.jsx("label",{className:"text-sm font-medium mt-2 block",children:"Coal baseline (gCO₂e/kWh)"}),e.jsx("input",{className:"w-full",type:"range",min:650,max:1200,step:10,value:P,onChange:t=>H(Number(t.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(P)," gCO₂e/kWh"]})]})]})}),e.jsxs("section",{className:"lg:col-span-8 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Outputs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[e.jsx(U,{label:"Total (CO₂e)",value:k.total_gCO2e,unit:"g per scenario unit",hint:k.unitHint}),e.jsx(U,{label:"Shipping share",value:k.shippingSharePct,unit:"% of total",isPercent:!0}),e.jsx(U,{label:Z(s),value:k.deltaVsCoal_gPerKWh,unit:"gCO₂e/kWh",hint:"Negative = better than coal; positive = worse than coal (WTW→Wire mode)."})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-medium",children:"Stage breakdown"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"CO₂ and CH₄ are separated to make methane’s GWP sensitivity visible."}),e.jsx("div",{className:"mt-3",children:e.jsx(ee,{breakdown:k.breakdown})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Break-even surface (leakage × slip)"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Heatmap color encodes the modeled difference vs the coal baseline in gCO₂e/kWh (using the current corridor, process penalties, plant efficiency, and GWP horizon)."}),e.jsx("div",{className:"mt-4",children:e.jsx(te,{grid:T,marker:{leakagePct:j,slipPct:p}})})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Notes for revision"}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-slate-700 space-y-2 mt-2",children:[e.jsxs("li",{children:["All defaults are exposed in ",e.jsx("code",{className:"px-1",children:"src/maritime/data.js"}),". Replace these with values and citations aligned to your chosen accounting framework."]}),e.jsx("li",{children:"This model is deliberately transparent rather than exhaustive: the point is to let users see which assumptions must hold for outcomes to flip."}),e.jsx("li",{children:"If you want corridor maps, we can add a GeoJSON layer next, but the current implementation already captures the corridor-distance argument without adding mapping complexity."})]})]})]})]})})]})}function D({label:s,value:n,setValue:l,min:o,max:d,step:a,suffix:i}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:s}),e.jsx("input",{className:"w-full",type:"range",min:o,max:d,step:a,value:n,onChange:r=>l(Number(r.target.value))}),e.jsxs("div",{className:"text-xs text-slate-600",children:[_(n,2),i]})]})}function U({label:s,value:n,unit:l,hint:o,isPercent:d}){const a=n==null?"—":d?`${_(n,1)}%`:_(n,0);return e.jsxs("div",{className:"rounded-md border bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-600",children:s}),e.jsx("div",{className:"text-2xl font-semibold mt-1",children:a}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:l}),o?e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:o}):null]})}X.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(ae,{})}));
